<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:forgeview="http://jboss.org/forge/view"
	xmlns:rich="http://richfaces.org/rich" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough" template="/resources/scaffold/pageTemplate.xhtml">

	<f:metadata>
		<f:viewParam name="id" value='#{bookingBean.id}' />
		<f:event type="preRenderView" listener='#{bookingBean.retrieve}' />
	</f:metadata>

	<ui:param name="pageTitle" value="Create Booking" />

	<ui:define name="header">
		Buchungen
	</ui:define>

	<ui:define name="subheader">
		Buchungen erstellen
	</ui:define>

	<ui:define name="footer" />

	<ui:define name="main">
	
		<h:messages globalOnly="true" styleClass="error" />

		<h:form id="createBookings">
			<h:panelGrid columnClasses="label,component,required" columns="3">

				<h:outputLabel for="bookingBeanBookingActivity" value="Aktivit채t:" />
				<h:panelGroup>
					<h:selectOneListbox id="bookingBeanBookingActivity" value="#{bookingBean.activity}"
						converter="#{activityBean.converter}" required="true">
						<f:selectItems value="#{activityBean.active}" var="item" itemLabel="#{item.name}" itemValue="#{item}" />
					</h:selectOneListbox>
				</h:panelGroup>
				<h:message for="bookingBeanBookingActivity" styleClass="error" />

				<h:outputLabel for="bookingBeanBookingSquads" value="Trupp:" />
				<h:panelGroup>
					<h:selectManyListbox id="bookingBeanBookingSquads" value="#{bookingBean.squads}" converter="#{squadBean.converter}"
						required="true" size="4">
						<f:selectItems value="#{squadBean.all}" var="item" itemLabel="#{item.name}" itemValue="#{item}" />
					</h:selectManyListbox>
				</h:panelGroup>
				<h:message for="bookingBeanBookingSquads" styleClass="error" />

				<h:outputLabel for="bookingBeanBookingWithAssistants" value="Mit Assistenten:" />
				<h:selectBooleanCheckbox id="bookingBeanBookingWithAssistants" value="#{bookingBean.withAssistants}"/>
				<h:message for="bookingBeanBookingWithAssistants" styleClass="error" />

				<h:outputLabel value="Buchung durchf체hren:" />
				<h:commandButton id="bookingBeanCreateBookings" action="#{bookingBean.createBookings()}" value="Buchen" disabled="#{!bookingBean.updateAllowed}"/>
				<h:messages for="bookingBeanCreateBookings" />

			</h:panelGrid>
		</h:form>

		<h:form id="createBookingsForAllActive">
			<h:panelGrid columnClasses="label,component,required" columns="3">

				<h:outputLabel for="bookingBeanBookingActivityAllActive" value="Aktivit채t:" />
				<h:panelGroup>
					<h:selectOneListbox id="bookingBeanBookingActivityAllActive" value="#{bookingBean.activity}"
						converter="#{activityBean.converter}" required="true">
						<f:selectItems value="#{activityBean.active}" var="item" itemLabel="#{item.name}" itemValue="#{item}" />
					</h:selectOneListbox>
				</h:panelGroup>
				<h:message for="bookingBeanBookingActivityAllActive" styleClass="error" />

				<h:outputLabel value="Buchung durchf체hren:" />
				<h:commandButton id="bookingBeanCreateBookingsAllActive" action="#{bookingBean.createBookingsForAllActive()}" value="Alle Aktiven Pfadfinder Buchen" disabled="#{!bookingBean.createAllAllowed}"/>
				<h:messages for="bookingBeanCreateBookingsAllActive" />

			</h:panelGrid>
		</h:form>

	</ui:define>

</ui:composition>